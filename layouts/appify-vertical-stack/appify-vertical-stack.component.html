<!-- [class.margin-width]="width == stackWidthValue.margin" -->
<div class="layout-container"
    [style.padding-top]="style?.padding?.top ? style?.padding?.top + 'px' : ''"
    [style.padding-bottom]="style?.padding?.bottom ? style?.padding?.bottom + 'px' : ''"
    [style.padding-left]="style?.padding?.left ? style?.padding?.left + 'px' : ''"
    [style.padding-right]="style?.padding?.right ? style?.padding?.right + 'px' : ''"
    [style.margin-top]="style?.margin?.top ? style?.margin?.top + 'px' : ''"
    [style.margin-bottom]="style?.margin?.bottom ? style?.margin?.bottom + 'px' : ''"
    [style.margin-left]="style?.margin?.left ? style?.margin?.left + 'px' : ''"
    [style.margin-right]="style?.margin?.right ? style?.margin?.right + 'px' : ''"
    [style.backgroundImage]="style?.background_image ? 'url(' + style?.background_image + ')' : ''"
    [style.backgroundSize]="style?.background_size ? style?.background_size : ''"
    [style.backgroundRepeat]="style?.background_repeat ? style?.background_repeat : ''"
    [style.backgroundPosition]="style?.background_position ? style?.background_position : ''"
    [style.background]="getBackgroundLinearGradient().length ? getBackgroundLinearGradient() : style?.background_color ? style?.background_color : ''"
    [style.borderRadius]="style?.corner_radius ? style?.corner_radius + 'px' : ''"
    [style.width]="getWidth()"
    [style.box-shadow]="getShadow()"
    >

    <div *ngFor="let block of blocks; let i = index">
        <!-- Add block line -->
        <codeless-add-block-line *ngIf="renderAddBlockLine(i)" [index]="i" (addBlockElement)="didAddBlock($event)"></codeless-add-block-line>

        <div *ngIf="block?.properties.style[screen_size]?.display == true">
            <div [ngSwitch]="block.type">
                <!-- Layouts -->
                <appify-horizontal-stack *ngSwitchCase="'appify-horizontal-stack'" [id]="'item-' + i" [screen_size]="screen_size" (editBlockElement)="didSelectBlock($event)" [blocks]="block?.properties.blocks" [isEditing]="isEditing" [width]="block.properties.style[screen_size]?.width" [style]="block.properties.style[screen_size]"></appify-horizontal-stack>
                <appify-vertical-stack *ngSwitchCase="'appify-vertical-stack'" [id]="'item-' + i" [screen_size]="screen_size" (editBlockElement)="didSelectBlock($event)" [blocks]="block?.properties.blocks" [isEditing]="isEditing" [width]="block.properties.style[screen_size]?.width" [style]="block.properties.style[screen_size]"></appify-vertical-stack>

                <!-- Components -->
                <appify-button *ngSwitchCase="'appify-button'" [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" [title]="block.properties.text" [width]="block.properties.style[screen_size]?.width" [alignment]="block.properties.style[screen_size]?.alignment" [padding]="block.properties.style[screen_size]?.padding" [margin]="block.properties.style[screen_size]?.margin" [style]="block.properties.style[screen_size]?.button"></appify-button>
                <appify-carousel *ngSwitchCase="'appify-carousel'" [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" [items]="block.properties.items" [headline]="block.properties.headline" [subtitle]="block.properties.subtitle" [width]="block.properties.style[screen_size]?.width" [alignment]="block.properties.style[screen_size]?.alignment" [style]="block.properties.style[screen_size]"></appify-carousel>
                <appify-cta *ngSwitchCase="'appify-cta'" [id]="'item-' + i" [headline]="block.properties.headline" [subtitle]="block.properties.subtitle" [paragraph]="block.properties.paragraph" [width]="block.properties.style[screen_size]?.width" [buttonText]="block.properties.buttonText" [buttonURL]="block.properties.buttonURL" [backgroundColor]="block.properties.style[screen_size]?.backgroundColor" [style]="block.properties.style[screen_size]"></appify-cta>
                <appify-feature *ngSwitchCase="'appify-feature'" [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" [featureAlignment]="block.properties.style[screen_size]?.alignment" [verticalAlignment]="block.properties.style[screen_size]?.verticalAlignment" [imageURL]="block.properties.url" [title]="block.properties.title" [subtitle]="block.properties.subtitle" [body]="block.properties.body" [buttonText]="block.properties.button_text" [buttonURL]="block.properties.buttonURL" [width]="block.properties.style[screen_size]?.width" [style]="block.properties.style[screen_size]"></appify-feature>
                <appify-grid *ngSwitchCase="'appify-grid'" [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" [items]="block.properties.items" [alignment]="block.properties.style[screen_size]?.alignment" [headline]="block.properties.headline" [subtitle]="block.properties.subtitle" [columns]="block.properties.style[screen_size]?.columns" [width]="block.properties.style[screen_size]?.width" [style]="block.properties.style[screen_size]"></appify-grid>
                <appify-image *ngSwitchCase="'appify-image'" [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" [url]="block.properties.url" [width]="block.properties.style[screen_size]?.width" [alignment]="block.properties.style[screen_size]?.alignment" [style]="block.properties.style[screen_size]"></appify-image>
                <appify-line *ngSwitchCase="'appify-line'" [id]="'item-' + i" [height]="block?.properties.style[screen_size]?.height" [widthPercent]="block.properties.style[screen_size]?.width" [color]="block.properties.style[screen_size]?.color"></appify-line>
                <appify-list *ngSwitchCase="'appify-list'" [id]="'item-' + i" [items]="block.properties.items" [width]="block.properties.style[screen_size]?.width" [style]="block.properties.style[screen_size]"></appify-list>
                <appify-newsletter *ngSwitchCase="'appify-newsletter'" [id]="'item-' + i" [headline]="block.properties.headline" [subtitle]="block.properties.subtitle" [buttonText]="block.properties.buttonText" [width]="block.properties.style[screen_size]?.width" [style]="block.properties.style[screen_size]"></appify-newsletter>
                <appify-slider *ngSwitchCase="'appify-slider'" [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)"  [items]="block.properties.items" [width]="block.properties.style[screen_size]?.width" [alignment]="block.properties.style[screen_size]?.alignment" [verticalAlignment]="block.properties.style[screen_size]?.verticalAlignment" [style]="block.properties.style[screen_size]"></appify-slider>
                <appify-spacer *ngSwitchCase="'appify-spacer'" [id]="'item-' + i" [space]="block.properties.style[screen_size]?.value"></appify-spacer>
                <appify-testimonial *ngSwitchCase="'appify-testimonial'" [id]="'item-' + i" [items]="block.properties.items" [width]="block.properties.style[screen_size]?.width" [style]="block.properties.style[screen_size]"></appify-testimonial>
                <appify-text *ngSwitchCase="'appify-text'" [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" [text]="block.properties.text" [textType]="block.properties.text_type" [alignment]="block.properties.style[screen_size]?.alignment" [width]="block.properties.style[screen_size]?.width" [style]="block.properties.style[screen_size]"></appify-text>
                <appify-video *ngSwitchCase="'appify-video'" [id]="'item-' + i" [url]="block.properties.url" [width]="block.properties.style[screen_size]?.width" [alignment]="block.properties.style[screen_size]?.alignment" [style]="block.properties.style[screen_size]"></appify-video>
                <appify-wall *ngSwitchCase="'appify-wall'" [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" [height]="block.properties.style[screen_size]?.height" [maxWidth]="block.properties.style[screen_size]?.maxWidth" [alignment]="block.properties.style[screen_size]?.alignment" [items]="block.properties.items" [style]="block.properties.style[screen_size]"></appify-wall>
                <appify-iframe *ngSwitchCase="'appify-iframe'" [id]="'item-' + i" (editBlockElement)="didSelectBlock($event)" [identifier]="block.id" [isEditing]="isEditing" [code]="block.properties.code"></appify-iframe>
            </div>
        </div>

        <!-- Add block line (last item only) -->
        <codeless-add-block-line *ngIf="isEditing && block?.properties?.style[screen_size]?.display && (i == blocks.length - 1)" [index]="i + 1" (addBlockElement)="didAddBlock($event)"></codeless-add-block-line>
    </div>
</div>