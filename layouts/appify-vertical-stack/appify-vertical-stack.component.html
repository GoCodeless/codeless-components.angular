<div class="layout-container">
    <div *ngFor="let block of blocks; let i = index" style="background-color: var(--color-background);">
        <!-- Add block line -->
        <codeless-add-block-line *ngIf="isEditing && block.properties?.style?.web?.display" [index]="i" (addBlockElement)="didAddBlock($event)"></codeless-add-block-line>

        <!-- Layouts -->
        <appify-horizontal-stack [id]="'item-' + i" *ngIf="block.type == 'appify-horizontal-stack' && (block.properties.style?.web?.display == true)" [blocks]="block.properties.blocks"></appify-horizontal-stack>
        <appify-vertical-stack [id]="'item-' + i" *ngIf="block.type == 'appify-vertical-stack' && (block.properties.style?.web?.display == true)" [blocks]="block.properties.blocks"></appify-vertical-stack>

        <!-- Components -->
        <appify-button [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" *ngIf="block.type == 'appify-button' && (block.properties.style?.web?.display == true)" [title]="block.properties.text" [width]="block.properties.style?.web?.width" [alignment]="block.properties.style?.web?.alignment" [padding]="block.properties.style?.app?.padding" [style]="block.properties.style?.web?.button"></appify-button>
        <appify-carousel [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" *ngIf="block.type == 'appify-carousel' && (block.properties.style?.web?.display == true)" [items]="block.properties.items" [headline]="block.properties.headline" [subtitle]="block.properties.subtitle" [width]="block.properties.style?.web?.width" [alignment]="block.properties.style?.web?.alignment" [style]="block.properties.style?.web"></appify-carousel>
        <appify-cta [id]="'item-' + i" *ngIf="block.type == 'appify-cta' && (block.properties.style?.web?.display == true)" [headline]="block.properties.headline" [subtitle]="block.properties.subtitle" [paragraph]="block.properties.paragraph" [width]="block.properties.style?.web?.width" [buttonText]="block.properties.buttonText" [buttonURL]="block.properties.buttonURL" [backgroundColor]="block.properties.style?.web?.backgroundColor" [style]="block.properties.style?.web"></appify-cta>
        <appify-feature [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" *ngIf="block.type == 'appify-feature' && (block.properties.style?.web?.display == true)" [featureAlignment]="block.properties.style?.web?.alignment" [verticalAlignment]="block.properties.style?.web?.verticalAlignment" [imageURL]="block.properties.url" [title]="block.properties.title" [subtitle]="block.properties.subtitle" [body]="block.properties.body" [buttonText]="block.properties.button_text" [buttonURL]="block.properties.buttonURL" [width]="block.properties.style?.web?.width" [style]="block.properties.style?.web"></appify-feature>
        <appify-grid [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" *ngIf="block.type == 'appify-grid' && (block.properties.style?.web?.display == true)" [items]="block.properties.items" [alignment]="block.properties.style?.web?.alignment" [headline]="block.properties.headline" [subtitle]="block.properties.subtitle" [columns]="block.properties.style?.web?.columns" [width]="block.properties.style?.web?.width" [style]="block.properties.style.web"></appify-grid>
        <appify-image [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" *ngIf="block.type == 'appify-image' && (block.properties.style?.web?.display == true)" [url]="block.properties.url" [width]="block.properties.style?.web?.width" [style]="block.properties.style?.web"></appify-image>
        <appify-line [id]="'item-' + i" *ngIf="block.type == 'appify-line' && (block.properties.style?.web?.display == true)" [height]="block.properties.style?.web?.height" [widthPercent]="block.properties.style?.web?.width_percent" [color]="block.properties.style?.web?.color"></appify-line>
        <appify-list [id]="'item-' + i" *ngIf="block.type == 'appify-list' && (block.properties.style?.web?.display == true)" [items]="block.properties.items" [width]="block.properties.style?.web?.width" [style]="block.properties.style?.web"></appify-list>
        <appify-newsletter [id]="'item-' + i" *ngIf="block.type == 'appify-newsletter' && (block.properties.style?.web?.display == true)" [headline]="block.properties.headline" [subtitle]="block.properties.subtitle" [buttonText]="block.properties.buttonText" [width]="block.properties.style?.web?.width" [style]="block.properties.style?.web"></appify-newsletter>
        <appify-slider [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" *ngIf="block.type == 'appify-slider' && (block.properties.style?.web?.display == true)"  [items]="block.properties.items" [width]="block.properties.style?.web?.width" [alignment]="block.properties.style?.web?.alignment" [verticalAlignment]="block.properties.style?.web?.verticalAlignment" [style]="block.properties.style?.web"></appify-slider>
        <appify-spacer [id]="'item-' + i" *ngIf="block.type == 'appify-spacer' && (block.properties.style?.web?.display == true)" [space]="block.properties.style?.web?.value"></appify-spacer>
        <appify-testimonial [id]="'item-' + i" *ngIf="block.type == 'appify-testimonial' && (block.properties.style?.web?.display == true)" [items]="block.properties.items" [width]="block.properties.style?.web?.width" [style]="block.properties.style?.web"></appify-testimonial>
        <appify-text [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" *ngIf="block.type == 'appify-text' && (block.properties.style?.web?.display == true)" [text]="block.properties.text" [textType]="block.properties.text_type" [alignment]="block.properties.style?.web?.alignment" [width]="block.properties.style?.web?.width" [style]="block.properties.style?.web"></appify-text>
        <appify-video [id]="'item-' + i" *ngIf="block.type == 'appify-video' && (block.properties.style?.web?.display == true)" [url]="block.properties.url" [width]="block.properties.style?.web?.width" [alignment]="block.properties.style?.web?.alignment" [style]="block.properties.style?.web"></appify-video>
        <appify-wall [id]="'item-' + i" [isEditing]="isEditing" [identifier]="block.id" (editBlockElement)="didSelectBlock($event)" *ngIf="block.type == 'appify-wall' && (block.properties.style?.web?.display == true)" [height]="block.properties.style?.web?.height" [maxWidth]="block.properties.style?.web?.maxWidth" [alignment]="block.properties.style?.web?.alignment" [items]="block.properties.items" [style]="block.properties.style?.web"></appify-wall>

        <!-- Add block line (last item only) -->
        <codeless-add-block-line *ngIf="isEditing && block.properties?.style?.web?.display && (i == blocks.length - 1)" [index]="i + 1" (addBlockElement)="didAddBlock($event)"></codeless-add-block-line>
    </div>
</div>
